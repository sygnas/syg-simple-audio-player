!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i(require("@sygnas/audio-src")):"function"==typeof define&&define.amd?define(["@sygnas/audio-src"],i):t["syg-simple-audio-player"]=i(t.AudioSrc)}(this,function(t){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t;var i=function(){function t(t,i){for(var s=0;s<i.length;s++){var e=i[s];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}return function(i,s,e){return s&&t(i.prototype,s),e&&t(i,e),i}}();return function(){function s(i,e,a){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,s),this.STATE_PLAY="play",this.STATE_PAUSE="pause",this.STATE_STOP="stop";this.opt=Object.assign({attr_src:"data-audio-src",attr_status:"data-audio-status",attr_type:"data-audio-type",hds:{protcol:"http://",playlist:"/manifest.f4m"},hls:{protcol:"http://",playlist:"/playlist.m3u8"},mse:{protcol:"http://",playlist:"/manifest.mpd",autoplay:!1}},a),this.is_playing=!1,this.now_playing_btn=null,this.targets=document.querySelectorAll(i),this.audio_src=new t({hds:this.opt.hds,hls:this.opt.hls,mse:this.opt.mse}),this.$_init_event()}return i(s,[{key:"stop",value:function(){this.$_stop()}},{key:"$_init_event",value:function(){var t=this;(function(t){return Array.prototype.slice.call(t,0)})(this.targets).forEach(function(i){i.addEventListener("click",t.$_on_btn_click.bind(t))}),this.audio_src.audio.addEventListener("ended",this.$_stop.bind(this))}},{key:"$_on_btn_click",value:function(t){t.preventDefault(),t.target===this.now_playing_btn?this.$_pause(t.target):this.$_play_new(t.target)}},{key:"$_stop",value:function(){this.audio_src.audio.pause(),this.audio_src.audio.currentTime=0,this.$_change_state(this.STATE_STOP,this.now_playing_btn),this.now_playing_btn=null}},{key:"$_pause",value:function(t){this.is_playing?(this.audio_src.audio.pause(),this.$_change_state(this.STATE_PAUSE,t)):(this.audio_src.audio.play(),this.$_change_state(this.STATE_PLAY,t))}},{key:"$_play_new",value:function(t){var i=this.opt,s=this.audio_src;this.now_playing_btn&&(s.audio.pause(),this.$_change_state(this.STATE_STOP,this.now_playing_btn));var e=t.getAttribute(i.attr_src),a=t.getAttribute(i.attr_type);if(a===s.TYPE_FILE)s.set_src(e,s.TYPE_FILE);else if(null===a&&this.audio_src.check_support())s.set_src(e);else{if(a!==s.TYPE_HDS&&a!==s.TYPE_HLS&&a!==s.TYPE_MSE){var n=new Error;throw n.message="not supported type.",n}s.set_src(e,a)}s.audio.load(),s.audio.play(),this.now_playing_btn=t,this.$_change_state(this.STATE_PLAY,t)}},{key:"$_change_state",value:function(t,i){t===this.STATE_PLAY?this.is_playing=!0:t!==this.STATE_PAUSE&&t!==this.STATE_STOP||(this.is_playing=!1),i&&i.setAttribute(this.opt.attr_status,t)}}]),s}()});
//# sourceMappingURL=simple-audio-player.min.js.map
