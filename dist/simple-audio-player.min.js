!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t["syg-simple-audio-player"]=e()}(this,function(){"use strict";function t(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function e(t,e){return t(e={exports:{}},e.exports),e.exports}var n=e(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}),r=e(function(t){var e=t.exports={version:"2.5.3"};"number"==typeof __e&&(__e=e)}),i=(r.version,function(t,e,n){if(function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!")}(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}),o=function(t){return"object"==typeof t?null!==t:"function"==typeof t},u=function(t){if(!o(t))throw TypeError(t+" is not an object!");return t},s=function(t){try{return!!t()}catch(t){return!0}},a=!s(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),c=n.document,l=o(c)&&o(c.createElement),f=!a&&!s(function(){return 7!=Object.defineProperty((t="div",l?c.createElement(t):{}),"a",{get:function(){return 7}}).a;var t}),p=Object.defineProperty,h={f:a?Object.defineProperty:function(t,e,n){if(u(t),e=function(t,e){if(!o(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!o(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!o(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!o(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}(e,!0),u(n),f)try{return p(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},_=a?function(t,e,n){return h.f(t,e,function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}(1,n))}:function(t,e,n){return t[e]=n,t},y=function(t,e,o){var u,s,a,c=t&y.F,l=t&y.G,f=t&y.S,p=t&y.P,h=t&y.B,d=t&y.W,v=l?r:r[e]||(r[e]={}),b=v.prototype,m=l?n:f?n[e]:(n[e]||{}).prototype;for(u in l&&(o=e),o)(s=!c&&m&&void 0!==m[u])&&u in v||(a=s?m[u]:o[u],v[u]=l&&"function"!=typeof m[u]?o[u]:h&&s?i(a,n):d&&m[u]==a?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(a):p&&"function"==typeof a?i(Function.call,a):a,p&&((v.virtual||(v.virtual={}))[u]=a,t&y.R&&b&&!b[u]&&_(b,u,a)))};y.F=1,y.G=2,y.S=4,y.P=8,y.B=16,y.W=32,y.U=64,y.R=128;var d,v,b=y,m={}.hasOwnProperty,g=function(t,e){return m.call(t,e)},w={}.toString,E=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==function(t){return w.call(t).slice(8,-1)}(t)?t.split(""):Object(t)},S=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t},T=function(t){return E(S(t))},P=Math.ceil,O=Math.floor,j=function(t){return isNaN(t=+t)?0:(t>0?O:P)(t)},M=Math.min,k=Math.max,$=Math.min,A=n["__core-js_shared__"]||(n["__core-js_shared__"]={}),Y=0,x=Math.random(),L=A[d="keys"]||(A[d]={}),F=(v=!1,function(t,e,n){var r,i,o=T(t),u=(r=o.length)>0?M(j(r),9007199254740991):0,s=function(t,e){return(t=j(t))<0?k(t+e,0):$(t,e)}(n,u);if(v&&e!=e){for(;u>s;)if((i=o[s++])!=i)return!0}else for(;u>s;s++)if((v||s in o)&&o[s]===e)return v||s||0;return!v&&-1}),I=function(t){return L[t]||(L[t]=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++Y+x).toString(36))}(t))}("IE_PROTO"),H="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),R=Object.keys||function(t){return function(t,e){var n,r=T(t),i=0,o=[];for(n in r)n!=I&&g(r,n)&&o.push(n);for(;e.length>i;)g(r,n=e[i++])&&(~F(o,n)||o.push(n));return o}(t,H)},C={f:Object.getOwnPropertySymbols},U={f:{}.propertyIsEnumerable},W=Object.assign,D=!W||s(function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=W({},t)[n]||Object.keys(W({},e)).join("")!=r})?function(t,e){for(var n=Object(S(t)),r=arguments.length,i=1,o=C.f,u=U.f;r>i;)for(var s,a=E(arguments[i++]),c=o?R(a).concat(o(a)):R(a),l=c.length,f=0;l>f;)u.call(a,s=c[f++])&&(n[s]=a[s]);return n}:W;b(b.S+b.F,"Object",{assign:D});var B=r.Object.assign,G=t(e(function(t){t.exports={default:B,__esModule:!0}})),N=t(e(function(t,e){e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}}));b(b.S+b.F*!a,"Object",{defineProperty:h.f});var q=r.Object,z=function(t,e,n){return q.defineProperty(t,e,n)},K=e(function(t){t.exports={default:z,__esModule:!0}});t(K);var J=t(e(function(t,e){e.__esModule=!0;var n,r=(n=K)&&n.__esModule?n:{default:n};e.default=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),(0,r.default)(t,i.key,i)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}()}));function Q(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function V(t,e){return t(e={exports:{}},e.exports),e.exports}var X=V(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}),Z=V(function(t){var e=t.exports={version:"2.5.3"};"number"==typeof __e&&(__e=e)}),tt=(Z.version,function(t,e,n){if(function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!")}(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}),et=function(t){return"object"==typeof t?null!==t:"function"==typeof t},nt=function(t){if(!et(t))throw TypeError(t+" is not an object!");return t},rt=function(t){try{return!!t()}catch(t){return!0}},it=!rt(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),ot=X.document,ut=et(ot)&&et(ot.createElement),st=!it&&!rt(function(){return 7!=Object.defineProperty((t="div",ut?ot.createElement(t):{}),"a",{get:function(){return 7}}).a;var t}),at=Object.defineProperty,ct={f:it?Object.defineProperty:function(t,e,n){if(nt(t),e=function(t,e){if(!et(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!et(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!et(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!et(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}(e,!0),nt(n),st)try{return at(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},lt=it?function(t,e,n){return ct.f(t,e,function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}(1,n))}:function(t,e,n){return t[e]=n,t},ft=function(t,e,n){var r,i,o,u=t&ft.F,s=t&ft.G,a=t&ft.S,c=t&ft.P,l=t&ft.B,f=t&ft.W,p=s?Z:Z[e]||(Z[e]={}),h=p.prototype,_=s?X:a?X[e]:(X[e]||{}).prototype;for(r in s&&(n=e),n)(i=!u&&_&&void 0!==_[r])&&r in p||(o=i?_[r]:n[r],p[r]=s&&"function"!=typeof _[r]?n[r]:l&&i?tt(o,X):f&&_[r]==o?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(o):c&&"function"==typeof o?tt(Function.call,o):o,c&&((p.virtual||(p.virtual={}))[r]=o,t&ft.R&&h&&!h[r]&&lt(h,r,o)))};ft.F=1,ft.G=2,ft.S=4,ft.P=8,ft.B=16,ft.W=32,ft.U=64,ft.R=128;var pt=ft,ht={}.hasOwnProperty,_t=function(t,e){return ht.call(t,e)},yt={}.toString,dt=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==function(t){return yt.call(t).slice(8,-1)}(t)?t.split(""):Object(t)},vt=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t},bt=function(t){return dt(vt(t))},mt=Math.ceil,gt=Math.floor,wt=function(t){return isNaN(t=+t)?0:(t>0?gt:mt)(t)},Et=Math.min,St=Math.max,Tt=Math.min,Pt=X["__core-js_shared__"]||(X["__core-js_shared__"]={}),Ot=0,jt=Math.random(),Mt=function(t){return Pt[t]||(Pt[t]={})}("keys"),kt=function(t){return function(e,n,r){var i,o,u=bt(e),s=(i=u.length)>0?Et(wt(i),9007199254740991):0,a=function(t,e){return(t=wt(t))<0?St(t+e,0):Tt(t,e)}(r,s);if(t&&n!=n){for(;s>a;)if((o=u[a++])!=o)return!0}else for(;s>a;a++)if((t||a in u)&&u[a]===n)return t||a||0;return!t&&-1}}(!1),$t=function(t){return Mt[t]||(Mt[t]=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++Ot+jt).toString(36))}(t))}("IE_PROTO"),At="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),Yt=Object.keys||function(t){return function(t,e){var n,r=bt(t),i=0,o=[];for(n in r)n!=$t&&_t(r,n)&&o.push(n);for(;e.length>i;)_t(r,n=e[i++])&&(~kt(o,n)||o.push(n));return o}(t,At)},xt={f:Object.getOwnPropertySymbols},Lt={f:{}.propertyIsEnumerable},Ft=Object.assign,It=!Ft||rt(function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=Ft({},t)[n]||Object.keys(Ft({},e)).join("")!=r})?function(t,e){for(var n=Object(vt(t)),r=arguments.length,i=1,o=xt.f,u=Lt.f;r>i;)for(var s,a=dt(arguments[i++]),c=o?Yt(a).concat(o(a)):Yt(a),l=c.length,f=0;l>f;)u.call(a,s=c[f++])&&(n[s]=a[s]);return n}:Ft;pt(pt.S+pt.F,"Object",{assign:It});var Ht=Z.Object.assign,Rt=Q(V(function(t){t.exports={default:Ht,__esModule:!0}})),Ct=Q(V(function(t,e){e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}}));pt(pt.S+pt.F*!it,"Object",{defineProperty:ct.f});var Ut=Z.Object,Wt=function(t,e,n){return Ut.defineProperty(t,e,n)},Dt=V(function(t){t.exports={default:Wt,__esModule:!0}});Q(Dt);var Bt=Q(V(function(t,e){e.__esModule=!0;var n,r=(n=Dt)&&n.__esModule?n:{default:n};e.default=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),(0,r.default)(t,i.key,i)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}()}));var Gt=function(){function t(e){Ct(this,t),this.TYPE_HDS="hds",this.TYPE_HLS="hls",this.TYPE_MSE="mse",this.TYPE_FILE="file";this.opt=Rt({hds:{protcol:"http://",playlist:"/manifest.f4m"},hls:{protcol:"http://",playlist:"/playlist.m3u8"},mse:{protcol:"http://",playlist:"/manifest.mpd",autoplay:!1}},e),this.audio=new Audio,this.dash_player=null,this.is_support_hds=!1,this.is_support_hls=!1,this.is_support_mse=!1,this.now_type=null,this.$_check_support_result=null}return Bt(t,[{key:"check_support",value:function(){if(null!==this.$_check_support_result)return this.$_check_support_result;try{this.is_support_hds="maybe"===this.audio.canPlayType("application/f4m+xml"),this.is_support_hls=function(t){return"maybe"===t.canPlayType("application/vnd.apple.mpegURL")}(this.audio),this.is_support_mse=(this.audio,t=null!==window.WebKitMediaSource&&void 0!==window.WebKitMediaSource,e=null!==window.MediaSource&&void 0!==window.MediaSource,t||e)}catch(t){return this.$_check_support_result=!1,!1}var t,e;return this.$_check_support_result=!0,!0}},{key:"set_src",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e===this.TYPE_FILE?this.$_set_src_file(t):e===this.TYPE_HLS?this.$_set_src_hls(t):e===this.TYPE_HDS?this.$_set_src_hds(t):e===this.TYPE_MSE?this.$_set_src_mse(t):this.is_support_hls?this.$_set_src_hls(t):this.is_support_hds?this.$_set_src_hds(t):!!this.is_support_mse&&this.$_set_src_mse(t)}},{key:"$_set_src_file",value:function(t){return this.audio.src=t,this.now_type=this.TYPE_FILE,!0}},{key:"$_set_src_hls",value:function(t){return!!this.is_support_hls&&(this.audio.src=this.opt.hls.protcol+t+this.opt.hls.playlist,this.now_type=this.TYPE_HLS,!0)}},{key:"$_set_src_hds",value:function(t){return!!this.is_support_hds&&(this.audio.src=this.opt.hds.protcol+t+this.opt.hds.playlist,this.now_type=this.TYPE_HDS,!0)}},{key:"$_set_src_mse",value:function(t){if(!this.is_support_mse)return!1;this.now_type=this.TYPE_MSE;var e=this.opt.mse.protcol+t+this.opt.mse.playlist;return null===this.dash_player?(this.dash_player=dashjs.MediaPlayer().create(),this.dash_player.initialize(this.audio,e,this.opt.mse.autoplay)):this.dash_player.attachSource(e),!0}}]),t}();return function(){function t(e,n,r){N(this,t),this.STATE_PLAY="play",this.STATE_PAUSE="pause",this.STATE_STOP="stop";this.opt=G({attr_src:"data-audio-src",attr_status:"data-audio-status",attr_type:"data-audio-type",hds:{protcol:"http://",playlist:"/manifest.f4m"},hls:{protcol:"http://",playlist:"/playlist.m3u8"},mse:{protcol:"http://",playlist:"/manifest.mpd",autoplay:!1}},r),this.is_playing=!1,this.now_playing_btn=null,this.targets=document.querySelectorAll(e),this.audio_src=new Gt({hds:this.opt.hds,hls:this.opt.hls,mse:this.opt.mse}),this.$_init_event()}return J(t,[{key:"stop",value:function(){this.$_stop()}},{key:"$_init_event",value:function(){var t,e=this;(t=this.targets,Array.prototype.slice.call(t,0)).forEach(function(t){t.addEventListener("click",e.$_on_btn_click.bind(e))}),this.audio_src.audio.addEventListener("ended",this.$_stop.bind(this))}},{key:"$_on_btn_click",value:function(t){t.preventDefault(),t.target===this.now_playing_btn?this.$_pause(t.target):this.$_play_new(t.target)}},{key:"$_stop",value:function(){this.audio_src.audio.pause(),this.audio_src.audio.currentTime=0,this.$_change_state(this.STATE_STOP,this.now_playing_btn),this.now_playing_btn=null}},{key:"$_pause",value:function(t){this.is_playing?(this.audio_src.audio.pause(),this.$_change_state(this.STATE_PAUSE,t)):(this.audio_src.audio.play(),this.$_change_state(this.STATE_PLAY,t))}},{key:"$_play_new",value:function(t){var e=this.opt,n=this.audio_src;this.now_playing_btn&&(n.audio.pause(),this.$_change_state(this.STATE_STOP,this.now_playing_btn));var r=t.getAttribute(e.attr_src),i=t.getAttribute(e.attr_type);if(i===n.TYPE_FILE)n.set_src(r,n.TYPE_FILE);else if(null===i&&this.audio_src.check_support())n.set_src(r);else{if(i!==n.TYPE_HDS&&i!==n.TYPE_HLS&&i!==n.TYPE_MSE){var o=new Error;throw o.message="not supported type.",o}n.set_src(r,i)}n.audio.load(),n.audio.play(),this.now_playing_btn=t,this.$_change_state(this.STATE_PLAY,t)}},{key:"$_change_state",value:function(t,e){t===this.STATE_PLAY?this.is_playing=!0:t!==this.STATE_PAUSE&&t!==this.STATE_STOP||(this.is_playing=!1),e&&e.setAttribute(this.opt.attr_status,t)}}]),t}()});
//# sourceMappingURL=simple-audio-player.min.js.map
